(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{37:function(e,t,n){"use strict";n.r(t);var i,r=n(1),a=n.n(r),o=n(17),s=n.n(o),c=n(13),d=n(5),l=n(8),u=n(25),b=n(10),j=n(16),f={downloadingAudio:!0,isFetching:!1,videos:void 0},h=Object(j.a)({name:"playlist",initialState:f,reducers:{fetchVideos:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{isFetching:!0})},fetchVideosCompleted:function(e,t){var n=t.payload,i=n.videos,r=n.downloadingAudio;return Object(b.a)(Object(b.a)({},e),{},{isFetching:!1,downloadingAudio:r,videos:i})}}}),p=h.actions,O=p.fetchVideos,v=p.fetchVideosCompleted,m=h.reducer,x={downloads:void 0,isFetching:!1},w=Object(j.a)({name:"downloads",initialState:x,reducers:{fetchDownloads:function(e){},fetchDownloadsComplete:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{downloads:t.payload,isFetching:!1})},removeFirstDownload:function(e){var t;return Object(b.a)(Object(b.a)({},e),{},{downloads:null===(t=e.downloads)||void 0===t?void 0:t.slice(1)})}}}),g=w.actions,y=g.fetchDownloads,A=g.fetchDownloadsComplete,k=g.removeFirstDownload,D=w.reducer,I=Object(l.b)({playlist:m,downloads:D}),F=n(9),S=n.n(F),V=n(15);!function(e){e.startDownload="start_download",e.cancelDownload="cancel_download",e.awaitVideoInfo="await_video_info",e.getActiveDownloads="get_active_downloads",e.updateTitle="update_title",e.highlightTab="highlight_tab"}(i||(i={}));var P,N,_=i,M=n(21),C=[{tabId:43,active:!0,isAudio:!0,total:4569474,received:1569474,videoId:"kSiVGS-8yN0",title:"D-Block & S-te-Fan - Gates Of Paradise"},{tabId:27,active:!1,isAudio:!1,total:4569474,received:4069474,videoId:"kSiVGS-8yN0",title:"D-Block & S-te-Fan - Gates Of Paradise"}],T=function(){return{runtime:{sendMessage:function(e,t,n,i){switch(t.type){case _.getActiveDownloads:i(C);break;default:console.warn("Called unhandled MessageType: ".concat(t)),i(null)}}}}},L=function(e){var t;return(null===e||void 0===e||null===(t=e.runtime)||void 0===t?void 0:t.sendMessage)?e:null},E=null!==(P=null!==(N=L(window.browser))&&void 0!==N?N:L(window.chrome))&&void 0!==P?P:T(),G={sendMessage:function(){var e=Object(M.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return E.runtime.sendMessage(null,t,null,e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},R=S.a.mark(z),X=S.a.mark(B);function z(){var e;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G.sendMessage({type:_.getActiveDownloads});case 2:return e=t.sent,t.next=5,Object(V.a)(A(e));case 5:case"end":return t.stop()}}),R)}function B(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(V.b)(y.type,z);case 2:case"end":return e.stop()}}),X)}var J=B,U=S.a.mark(Y),q=S.a.mark(H);function Y(e){var t,n,i,r,a;return S.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.id,i=t.isAudio,o.next=3,fetch("https://richee.me/playlist/?list=".concat(n));case 3:return r=o.sent,o.next=6,r.json();case 6:return a=o.sent,o.next=9,Object(V.a)(v({videos:a,downloadingAudio:i}));case 9:case"end":return o.stop()}}),U)}function H(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(V.b)(O.type,Y);case 2:case"end":return e.stop()}}),q)}var K=[H,J],Q=Object(u.a)(),W=Object(l.d)(I,Object(l.a)(Q));K.forEach(Q.run);var Z,$,ee=W,te={video:"#808",audio:"#773004",gray100:"#333",gray200:"#555",gray300:"#666",gray400:"#888",gray500:"#ccc",white:"#fff"},ne=n(6),ie=n(2),re=Object(d.c)(Z||(Z=Object(ne.a)(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]))),ae=d.b.div($||($=Object(ne.a)(["\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 90%;\n  height: 4rem;\n  z-index: 1;\n\n  &:after {\n    content: ' ';\n    display: block;\n    width: 24px;\n    height: 24px;\n    margin: 1rem 0 0 calc(50% - 24px);\n    border-radius: 50%;\n    border: 3px solid #fff;\n    border-color: #fff transparent #fff transparent;\n    animation: "," 1.2s linear infinite;\n  }\n"])),re),oe=function(e){var t=e.isLoading,n=e.children,i=e.className;return Object(ie.jsx)("div",{className:i,children:t?Object(ie.jsx)(ae,{}):n})};oe.defaultProps={isLoading:!1};var se,ce,de,le=oe,ue=d.b.div(se||(se=Object(ne.a)(["\n  & > :first-child {\n    border-radius: 10px 10px 0 0;\n  }\n  & > :last-child {\n    border-radius: 0 0 10px 10px;\n  }\n"]))),be=function(e){var t=e.children;return Object(ie.jsx)(ue,{children:t})},je=d.b.div(ce||(ce=Object(ne.a)(["\n  height: 100%;\n  display: block;\n  position: relative;\n  border-radius: 10px;\n  margin-bottom: 5px;\n  transition: ease-out 0.1s;\n  box-shadow: inset 0 0 4px ",";\n  background: ",";\n  width: ","%;\n"])),(function(e){return e.theme.gray100}),(function(e){return e.isAudio?e.theme.audio:e.theme.video}),(function(e){return e.progress/e.total*100})),fe=d.b.div(de||(de=Object(ne.a)(["\n  width: 100%;\n  height: 0.5rem;\n"]))),he=function(e){var t=e.progress,n=e.total,i=e.isAudio,r=e.className;return Object(ie.jsx)(fe,{className:r,children:Object(ie.jsx)(je,{progress:t,total:n,isAudio:i})})};he.defaultProps={isAudio:!0};var pe,Oe,ve,me,xe,we,ge=he,ye=d.b.picture(pe||(pe=Object(ne.a)(["\n  max-height: 64px;\n"]))),Ae=d.b.img(Oe||(Oe=Object(ne.a)(["\n  border-radius: 10px;\n  max-height: inherit;\n  height: 100%;\n  width: auto;\n  aspect-ratio: 16/9;\n"]))),ke=function(e){var t=e.className,n=e.videoId,i=function(e){return"https://i.ytimg.com/vi/".concat(n,"/").concat(e,".jpg")};return Object(ie.jsxs)(ye,{className:t,children:[["default","hqdefault"].map((function(e){return Object(ie.jsx)("source",{srcSet:i(e)},e)})),Object(ie.jsx)(Ae,{srcSet:i("maxresdefault"),loading:"lazy"},"maxresdefault")]})},De=d.b.div(ve||(ve=Object(ne.a)(["\n  ","\n  padding: 0.5rem;\n  user-select: none;\n  background-color: #555;\n  box-shadow: 2px 2px 3px #333;\n"])),(function(e){return e.tabId&&"cursor: pointer;"})),Ie=d.b.div(me||(me=Object(ne.a)(["\n  display: flex;\n  width: 100%;\n  font-size: 10px;\n"]))),Fe=d.b.div(xe||(xe=Object(ne.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  width: 100%;\n  margin-left: 0.5rem;\n"]))),Se=Object(d.b)(ge)(we||(we=Object(ne.a)(["\n  margin-top: 0.25rem;\n"]))),Ve=function(e){var t=e.progressTotal,n=e.showProgress,i=e.progress,r=e.isAudio,a=e.tabId,o=e.video,s=o.title,c=o.id;return Object(ie.jsxs)(De,Object(b.a)(Object(b.a)({tabId:a,id:c},a&&{title:"Switch to tab"}),{},{children:[Object(ie.jsxs)(Ie,{children:[Object(ie.jsx)(ke,{videoId:c}),Object(ie.jsxs)(Fe,{children:[Object(ie.jsx)("span",{children:s}),Object(ie.jsx)("span",{children:r?"Audio (.weba)":"Video (.webm)"})]})]}),n&&t&&i&&Object(ie.jsx)(Se,{isAudio:r,progress:i,total:t})]}),c)};Ve.defaultProps={showProgress:!1,isAudio:!0};var Pe,Ne,_e,Me,Ce,Te,Le,Ee,Ge=Ve,Re=d.b.form(Pe||(Pe=Object(ne.a)(["\n  position: relative;\n  width: 80%;\n  left: 50%;\n  transform: translateX(-50%);\n"]))),Xe=d.b.div(Ne||(Ne=Object(ne.a)(["\n  display: flex;\n  margin: 0.2rem;\n  justify-content: space-around;\n  align-items: center;\n  width: 90%;\n"]))),ze=Object(d.b)(Xe)(_e||(_e=Object(ne.a)(["\n  flex-direction: column;\n\n  & > * {\n    width: 100%;\n  }\n"]))),Be=d.b.label(Me||(Me=Object(ne.a)(["\n  margin-bottom: 0.2rem;\n"]))),Je=Object(c.b)((function(e){return{isFetching:e.playlist.isFetching,isAudio:e.playlist.downloadingAudio,videos:e.playlist.videos}}),(function(e){return{fetchVideos:function(t,n){return e(O({id:t,isAudio:n}))}}}))((function(e){var t=e.isFetching,n=e.fetchVideos,i=e.videos,a=e.isAudio,o=Object(r.createRef)(),s=Object(r.createRef)();return Object(ie.jsxs)(le,{isLoading:t,children:[Object(ie.jsxs)(Re,{onSubmit:function(e){e.preventDefault();var t=o.current,i=s.current;if(t&&i){var r=function(t){try{var n=new URL(t).search.substring(1).split("&").map((function(e){return e.split("=")})).find((function(e){return"list"===e[0]}));return n?n[1]:null}catch(e){console.error(e)}}(t.value),a=i.checked;r&&n(r,a)}},children:[Object(ie.jsxs)(ze,{children:[Object(ie.jsx)(Be,{htmlFor:"playlist-url",children:"Playlist URL (Enter to start download)"}),Object(ie.jsx)("input",{type:"url",name:"playlist-url",id:"playlist-input",placeholder:"https://www.youtube.com/playlist?list=...",ref:o})]}),Object(ie.jsxs)(Xe,{children:[Object(ie.jsxs)("div",{children:[Object(ie.jsx)("input",{type:"radio",name:"mime-type",id:"audio",ref:s,defaultChecked:!0}),Object(ie.jsx)(Be,{htmlFor:"audio",children:"Audio"})]}),Object(ie.jsxs)("div",{children:[Object(ie.jsx)("input",{type:"radio",name:"mime-type",id:"video"}),Object(ie.jsx)(Be,{htmlFor:"video",children:"Video"})]})]})]}),Object(ie.jsx)("br",{}),Object(ie.jsx)(be,{children:function(){if(i)return i.map((function(e){return Object(ie.jsx)(Ge,{isAudio:a,video:e},e.id)}))}()})]})})),Ue=Object(c.b)((function(e){return{downloads:e.downloads.downloads}}),(function(e){return{fetchDownloads:function(){return e(y())},removeFirstDownload:function(){return e(k())}}}))((function(e){var t=e.downloads,n=e.fetchDownloads;return Object(r.useEffect)((function(){var e=setInterval(n,1e3);return function(){return clearInterval(e)}})),t?Object(ie.jsx)(be,{children:t.map((function(e){return Object(ie.jsx)(Ge,{tabId:e.tabId,video:{id:e.videoId,title:e.title},progress:e.received,progressTotal:e.total,isAudio:e.isAudio,showProgress:!0},e.tabId)}))}):null})),qe=d.b.div(Ce||(Ce=Object(ne.a)(["\n  text-align: center;\n"]))),Ye=d.b.img(Te||(Te=Object(ne.a)(["\n  display: block;\n  position: relative;\n  left: 50%;\n  transform: translateX(-50%);\n"]))),He=function(){return Object(ie.jsxs)(qe,{children:[Object(ie.jsx)(Ye,{src:"../../icons/128.png",width:"96px"}),Object(ie.jsx)("h2",{children:"YouTube Downloads"})]})},Ke=d.b.div(Le||(Le=Object(ne.a)(["\n  background: #777;\n  border-radius: 1rem;\n  padding: 0.5rem;\n  position: relative;\n  min-width: 350px;\n  width: 30%;\n  left: 50%;\n  transform: translateX(-50%);\n"]))),Qe=Object(d.b)(Ue)(Ee||(Ee=Object(ne.a)(["\n  margin-bottom: 1rem;\n"]))),We=function(){return Object(ie.jsxs)(Ke,{children:[Object(ie.jsx)(He,{}),Object(ie.jsx)(Qe,{}),Object(ie.jsx)("br",{}),Object(ie.jsx)(Je,{})]})};s.a.render(Object(ie.jsx)(a.a.StrictMode,{children:Object(ie.jsx)(c.a,{store:ee,children:Object(ie.jsx)(d.a,{theme:te,children:Object(ie.jsx)(We,{})})})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.a2112d16.chunk.js.map